"use strict";(self.webpackChunkkamasutra=self.webpackChunkkamasutra||[]).push([[878,325],{1062:(e,s,a)=>{a.r(s),a.d(s,{default:()=>k});var i=a(2791),t=a(2906),d=a(9595),g=a(1087),l=a(184);let o="https://buzookod.ru/media/2816616767_vubrbeJ.jpg";function n(e){return(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:d.Z.friendBlock,children:[(0,l.jsxs)(g.OL,{to:"/profile/"+e.id,children:[" ",(0,l.jsx)("div",{className:d.Z.photoBlock,children:(0,l.jsx)("img",{className:d.Z.dialogsPhoto,src:e.photos.small||o,alt:""})})]}),(0,l.jsxs)("div",{className:d.Z.nameFriend,children:[(0,l.jsxs)("div",{children:[e.name," "]}),(0,l.jsx)("div",{className:d.Z.newMessages,children:e.newMessages})]})]})})}a(994);var r=a(6139),c=a(2381),m=a(704),u=a(4047),h=a(77),x=a(3437),j=a(5214);const p=(0,h.DT)(50),v=(0,m.Z)({form:"dialogAddMessageForm",onSubmitSuccess:(e,s)=>s((0,c.mc)("dialogAddMessageForm"))})((e=>(0,l.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,l.jsx)("div",{className:d.Z.block_textarea,children:(0,l.jsx)(r.Z,{component:u.gx,name:"body",placeholder:"Enter your message",validate:[h.lp,p]})}),(0,l.jsx)("div",{className:d.Z.button_block,children:(0,l.jsx)("button",{className:d.Z.send_message,children:"Send"})})]})));var M=a(4420),f=a(1548),P=a(1154),Z=(a(3698),a(8980)),b=a(760);const k=(0,P.qC)((0,M.$j)((e=>({dialogsData:e.dialogsPage.dialogsData,messageData:e.dialogsPage.messageData,newMessageText:e.dialogsPage.newMessageText,dialogs:e.dialogsPage.dialogs,friends:e.dialogsPage.friends,pageSize:e.dialogsPage.pageSize,totalMessagesCount:e.dialogsPage.totalMessagesCount,currentPage:e.dialogsPage.currentPage,owner:e.auth.id})),{mapDispatchToProps:e=>({sendMessage:s=>{e((0,t.XE)(s))}}),getListMessages:t.v_,getFriends:t.Y5,getUsersThunk:Z.Uk,getChating:t.i7,sendMessage:t.Tu,delMessage:t.J1}),b.withRouter,f.D)((function(e){let s=e.router.params.friendId,a=e.owner,t=s||a;(0,i.useEffect)((()=>{e.getChating()}),[]),(0,i.useEffect)((()=>{e.getListMessages(t,e.currentPage,e.pageSize)}),[e.currentPage]);let o=e.dialogsData.map((s=>(0,l.jsx)(g.OL,{className:e=>e.isActive?d.Z.active:d.Z.dialog,to:"/dialogs/"+s.id,onClick:()=>{e.getListMessages(s.id)},children:(0,l.jsx)(n,{name:s.userName,id:s.id,newMessages:s.newMessagesCount,photos:s.photos,lastdialog:s.lastDialogActivityDate,lastActivity:s.lastUserActivityDate},s.id)})));return(0,l.jsxs)("div",{className:d.Z.dialogs,children:[(0,l.jsxs)("div",{className:d.Z.dialog_items,children:[(0,l.jsx)("h2",{children:"Dialogs"}),o]}),(0,l.jsxs)("div",{className:d.Z.messages,children:[(0,l.jsx)(x.Z,{friendId:t,dialogs:e.dialogs,owner:a,delMessage:e.delMessage}),(0,l.jsx)(j.Z,{currentPage:e.currentPage,onPageChanged:a=>{e.getListMessages(s,a,e.pageSize)},totalItemsCount:e.totalMessagesCount,pageSize:e.pageSize}),s?(0,l.jsx)(v,{onSubmit:s=>{e.sendMessage(t,s.body)}}):(0,l.jsx)("div",{children:"select a dialog"})]}),(0,l.jsx)("div",{})]})}))}}]);
//# sourceMappingURL=878.b29b67f8.chunk.js.map